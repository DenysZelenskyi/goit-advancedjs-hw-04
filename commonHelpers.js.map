{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const getImages = async (query, page) => {\n  const URL = `/api/`;\n\n\n  const axiosConfigs = {\n    params: {\n      q: query,\n      key: '10567451-e89d654aa7ed9140fe488f539',\n      image_type: 'photo',\n      per_page: 15,\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n    }\n    \n  }\n\n  return axios.get(URL, axiosConfigs)\n};\n","import iziToast from 'izitoast';\n\nexport const createGalleryCardTemplate = (cardInfo) => {\n  return `\n    <a href=\"${cardInfo.largeImageURL}\" class=\"gallery-item\">\n      <div class=\"gallery-card\">\n        <img src=\"${cardInfo.webformatURL}\" alt=\"${cardInfo.tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p><strong>Likes:</strong> ${cardInfo.likes}</p>\n          <p><strong>Views:</strong> ${cardInfo.views}</p>\n          <p><strong>Comments:</strong> ${cardInfo.comments}</p>\n          <p><strong>Downloads:</strong> ${cardInfo.downloads}</p>\n        </div>\n      </div>\n    </a>\n  `;\n};\n\nexport const displayGallery = (galleryMarkup, galleryEl, lightbox) => {\n  galleryEl.insertAdjacentHTML('beforeend', galleryMarkup);\n  lightbox.refresh();\n};\n\nexport const displayError = (message) => {\n  iziToast.error({\n    title: 'Error',\n    message,\n  });\n};\n\nexport const displayWarning = (message) => {\n  iziToast.warning({\n    title: 'No results',\n    message,\n  });\n};\n","import SimpleLightbox from \"simplelightbox\";\n\nimport { getImages } from './js/pixabay-api';\nimport { createGalleryCardTemplate, displayGallery, displayError, displayWarning } from './js/render-functions';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn')\n\n\nlet lightbox = new SimpleLightbox('.js-gallery a');\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nlet imagesLoaded = 0;\n\n\nconst onSearchFormSubmit = async e => {\n  e.preventDefault();\n\n  currentQuery = e.target.elements.user_query.value.trim();\n  currentPage = 1;\n  imagesLoaded = 0;\n  galleryEl.innerHTML = '';\n  loadMoreBtnEl.classList.add('is-hidden');\n\n  try {\n    loaderEl.classList.remove('is-hidden');\n    \n    const { data: { hits, totalHits: total } } = await getImages(currentQuery, currentPage);\n    totalHits = total;\n    \n    if (hits.length === 0) {\n      displayWarning('Sorry, there are no images matching your search query. Please try again!');\n      loadMoreBtnEl.classList.add('is-hidden');\n    } else {\n      imagesLoaded += hits.length;\n      const galleryMarkup = hits.map(createGalleryCardTemplate).join('');\n      displayGallery(galleryMarkup, galleryEl, lightbox);\n      if (imagesLoaded < totalHits) {\n        loadMoreBtnEl.classList.remove('is-hidden');\n      }\n    }\n  } catch(err) {\n    displayError(`Something went wrong: ${err.message}`);\n  } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n}\n\nconst onLoadMoreBtnClick = async e => {\n  try {\n    currentPage++;\n    loaderEl.classList.remove('is-hidden');\n\n    if (imagesLoaded >= totalHits) {\n      displayWarning(\"We're sorry, but you've reached the end of search results.\");\n      loadMoreBtnEl.classList.add('is-hidden');\n      loaderEl.classList.add('is-hidden');\n      return;\n    }\n\n    const { data: { hits } } = await getImages(currentQuery, currentPage);\n\n    if (hits.length === 0) {\n      displayWarning(\"We're sorry, but you've reached the end of search results.\");\n      loadMoreBtnEl.classList.add('is-hidden');\n    } else {\n      imagesLoaded += hits.length;\n      const galleryMarkup = hits.map(createGalleryCardTemplate).join('');\n      displayGallery(galleryMarkup, galleryEl, lightbox);\n      if (imagesLoaded >= totalHits) {\n        loadMoreBtnEl.classList.add('is-hidden');\n        displayWarning(\"We're sorry, but you've reached the end of search results.\");\n      }\n\n      const { height: cardHeight } = galleryEl.firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch(err){\n    displayError(`Something went wrong: ${err.message}`);\n  } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick)\n"],"names":["axios","getImages","query","page","URL","axiosConfigs","createGalleryCardTemplate","cardInfo","displayGallery","galleryMarkup","galleryEl","lightbox","displayError","message","iziToast","displayWarning","searchFormEl","loaderEl","loadMoreBtnEl","SimpleLightbox","currentPage","currentQuery","totalHits","imagesLoaded","onSearchFormSubmit","hits","total","err","onLoadMoreBtnClick","cardHeight"],"mappings":"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"}